<div ng-controller="StudyOverviewController as study">
	<div class="row">
		<div class="col-md-8">
			<h1 id="Title">
				Study {{::study.resource.items.name}} Overview
			</h1>
		</div>
		<div class="pull-right">
			<br/>
			<div id="Controls" class="align-right">
				<hateoas-controls
					ng-if='study.allow'
					data-template='study.template'
					data-href='{{study.resource.href}}'
					data-slug='{{study.resource.slug}}'
					data-permissions="study.allow"
					data-item='study.resource.items'>
				</hateoas-controls>
			</div>
		</div>
	</div>
	<hr/>
	<div class="row">
		<div class="col-md-12">
			<div class="panel panel-info">
				<div class="panel-heading">
					<h3 class="panel-title">Enrollment</h3>
				</div>
				<div class="panel-body">
					<div class="row">
						<!-- Collection Centres Panel -->
						<div class="col-md-8">
							<table class="table table-hover">
								<thead>
									<tr>
										<th ng-repeat="col in study.collectionCentres.columns">
											{{col.title}}
										</th>
									</tr>
								</thead>
								<tbody>
									<tr ng-repeat="row in study.collectionCentres.tableData">
										<td>{{row.name}}</td>
										<td>
											<select-loader
												url="user"
												is-atomic="true"
												is-disabled="true"
												values="row.contact"
												labels="prefix firstname lastname"
												output-properties="id">
											</select-loader>
										</td>
										<td>{{row.coordinators_count}}</td>
										<td>{{row.subjects_count}}</td>
									</tr>
								</tbody>
							</table>
						</div>
						<!-- Total Counts -->
						<div class="col-md-2">
							<div class="panel panel-success">
								<div class="panel-heading">
									<h3 class="panel-title text-center">Coordinators</h3>
								</div>
								<div class="panel-body">
									<h3 class="text-center">
										<b>{{study.collectionCentres.coordinators_total}}</b>
									</h3>
								</div>
							</div>
						</div>						
						<div class="col-md-2">
							<div class="panel panel-success">
								<div class="panel-heading">
									<h3 class="panel-title text-center">Subjects</h3>
								</div>
								<div class="panel-body">
									<h3 class="text-center">
										<b>{{study.collectionCentres.subjects_total}}</b>
									</h3>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-md-6">
			<div class="panel panel-info">
				<div class="panel-heading">
					<h3 class="panel-title">Study Information</h3>
				</div>
				<div class="panel-body">
					<simple-table 
						rows="study.studyInfo.rows"
						columns="study.studyInfo.columns" 
						table-data="study.studyInfo.tableData">
					</simple-table>
				</div>
			</div>
		</div>
		<div class="col-md-6">
			<div class="well">
				<form-directive form="study.clinicalForm" on-submit="study.generateReport()"></form-directive>
			</div>
		</div>		
	</div>
</div>
